<?php




$CountryCodes               =                   [   "BAH" => "Bahamas",
"AFG" => "Afghanistan",
"ALB" => "Albania",
"ALG" => "Algeria",
"AME" => "American_Samoa",
"AND" => "Andorra",
"ANG" => "Angola",
"ANG" => "Anguilla",
"ANT" => "Antarctica",
"ANT" => "Antigua",
"ARG" => "Argentina",
"ARM" => "Armenia",
"ARU" => "Aruba",
"ASC" => "Ascension_Island",
"AUS" => "Australia",
"AUS" => "Austria",
"AZE" => "Azerbaijan",
"BAR" => "Bahrain",
"BAN" => "Bangladesh",
"BAR" => "Barbados",
"BEL" => "Belarus",
"BEL" => "Belgium",
"BEL" => "Belize",
"BEN" => "Benin",
"BER" => "Bermuda",
"BHU" => "Bhutan",
"BOL" => "Bolivia",
"BOS" => "Bosnia_Hercegovina",
"BOT" => "Botswana",
"BRA" => "Brazil",
"BRI" => "British_Virgin_Islands",
"BRU" => "Brunei",
"BUL" => "Bulgaria",
"BUR" => "Burkina_Faso",
"BUR" => "Burundi",
"CAM" => "Cambodia",
"CAM" => "Cameroon",
"CAN" => "Canada",
"CAP" => "Cape_Verde_Islands",
"CAY" => "Cayman_Islands",
"CEN" => "Central_African_Republic",
"CHA" => "Chad_Republic",
"CHI" => "Chile",
"CHI" => "China",
"CHR" => "Christmas_Island",
"CNM" => "CNMI",
"COL" => "Colombia",
"COM" => "Comoros",
"CON" => "Congo",
"COO" => "Cook_Islands",
"COS" => "Costa_Rica",
"CRO" => "Croatia",
"CUB" => "Cuba",
"CYP" => "Cyprus",
"CZE" => "Czech_Republic",
"DEN" => "Denmark",
"DIE" => "Diego_Garcia",
"DJI" => "Djibouti",
"DOM" => "Dominica",
"DOM" => "Dominican_Republic",
"ECU" => "Ecuador",
"EGY" => "Egypt",
"EL_" => "El_Salvador",
"EQU" => "Equatorial_Guinea",
"ERI" => "Eritrea",
"EST" => "Estonia",
"ETH" => "Ethiopia",
"FAE" => "Faeroe_Islands",
"FAL" => "Falkland_Islands",
"FIJ" => "Fiji_Islands",
"FIN" => "Finland",
"FRA" => "France",
"FRE" => "French_Antilles",
"FRE" => "French_Guiana",
"FRE" => "French_Polynesia",
"GAB" => "Gabon",
"GAM" => "Gambia",
"GEO" => "Georgia",
"GER" => "Germany",
"GHA" => "Ghana",
"GIB" => "Gibraltar",
"GRE" => "Greece",
"GRE" => "Greenland",
"GRE" => "Grenada",
"GUA" => "Guadeloupe",
"GUA" => "Guam",
"GUA" => "Guantanamo_Bay",
"GUA" => "Guatemala",
"GUI" => "Guinea",
"GUI" => "Guinea_Bissau",
"GUY" => "Guyana",
"HAI" => "Haiti",
"HON" => "Honduras",
"HON" => "Hong_Kong",
"HUN" => "Hungary",
"ICE" => "Iceland",
"IND" => "India",
"IND" => "Indonesia",
"INM" => "Inmarsat___East_Atlantic_Ocean",
"INM" => "Inmarsat___Indian_Ocean",
"INM" => "Inmarsat___Pacific_Ocean",
"INM" => "Inmarsat___West_Atlantic_Ocean",
"IRA" => "Iran",
"IRA" => "Iraq",
"IRE" => "Ireland",
"ISR" => "Israel",
"ITA" => "Italy",
"IVO" => "Ivory_Coast",
"JAM" => "Jamaica",
"JAP" => "Japan",
"JOR" => "Jordan",
"KAZ" => "Kazakhstan",
"KEN" => "Kenya",
"KIR" => "Kiribati",
"KUW" => "Kuwait",
"KYR" => "Kyrgyzstan",
"LAO" => "Laos",
"LAT" => "Latvia",
"LEB" => "Lebanon",
"LES" => "Lesotho",
"LIB" => "Liberia",
"LIB" => "Libya",
"LIE" => "Liechtenstein",
"LIT" => "Lithuania",
"LUX" => "Luxembourg",
"MAC" => "Macau",
"MAE" => "Macedonia",
"MAD" => "Madagascar",
"MAL" => "Malawi",
"MAY" => "Malaysia",
"MAI" => "Maldives",
"MAL" => "Mali_Republic",
"MAL" => "Malta",
"MAR" => "Marshall_Islands",
"MAU" => "Mauritania",
"MAT" => "Mauritius",
"MAY" => "Mayotte_Island",
"MEX" => "Mexico",
"MIC" => "Micronesia",
"MOL" => "Moldova",
"MON" => "Monaco",
"MOG" => "Mongolia",
"MOS" => "MontSerrat",
"MOR" => "Morocco",
"MOZ" => "Mozambique",
"MYA" => "Myanmar",
"NAM" => "Namibia",
"NAU" => "Nauru",
"NEP" => "Nepal",
"NET" => "Netherlands",
"NEA" => "Netherlands_Antilles",
"NEV" => "Nevis",
"NEC" => "New_Caledonia",
"NEW" => "New_Zealand",
"NIC" => "Nicaragua",
"NIR" => "Niger_Republic",
"NIG" => "Nigeria",
"NIU" => "Niue",
"NOR" => "Norfolk_Island",
"NOR" => "North_Korea",
"NOR" => "Norway",
"OMA" => "Oman",
"PAK" => "Pakistan",
"PAL" => "Palau",
"PAE" => "Palestine",
"PAN" => "Panama",
"PAP" => "Papua_New_Guinea",
"PAR" => "Paraguay",
"PER" => "Peru",
"PHI" => "Philippines",
"POL" => "Poland",
"POR" => "Portugal",
"PUE" => "Puerto_Rico",
"QAT" => "Qatar",
"REU" => "Reunion_Island",
"ROM" => "Romania",
"RUS" => "Russia",
"RWA" => "Rwanda",
"SAI" => "Saipan",
"SAN" => "San_Marino",
"SAO" => "Sao_Tome",
"SAU" => "Saudi_Arabia",
"SEN" => "Senegal_Republic",
"SER" => "Serbia_Montenegro",
"SEY" => "Seychelles_Islands",
"SIE" => "Sierra_Leone",
"SIN" => "Singapore",
"SLO" => "Slovakia",
"SLN" => "Slovenia",
"SOL" => "Solomon_Islands",
"SOM" => "Somalia",
"SOU" => "South_Africa",
"SOU" => "South_Korea",
"SPA" => "Spain",
"SRI" => "Sri_Lanka",
"STK" => "St__Kitts_Nevis",
"STL" => "St__Lucia",
"STP" => "St__Pierre_Miquelon",
"STV" => "St__Vincent_Grenadines",
"STH" => "St_Helena",
"SUD" => "Sudan",
"SUR" => "Suriname",
"SWA" => "Swaziland",
"SWE" => "Sweden",
"SWI" => "Switzerland",
"SYR" => "Syria",
"TAI" => "Taiwan",
"TAJ" => "Tajikistan",
"TAN" => "Tanzania",
"THA" => "Thailand",
"TOG" => "Togo",
"TON" => "Tonga_Islands",
"TOR" => "Tongolese_Republic",
"TRI" => "Trinidad_Tobago",
"TUN" => "Tunisia",
"TUR" => "Turkey",
"TUM" => "Turkmenistan",
"TUR" => "Turks_Caicos_Islands",
"TUV" => "Tuvalu",
"UGA" => "Uganda",
"UKR" => "Ukraine",
"UNI" => "United_Arab_Emirates",
"UK" => " United_Kingdom",
"URU" => "Uruguay",
"USI" => "US_Virgin_Islands",
"USA" => "USA",
"UZB" => "Uzbekistan",
"VAN" => "Vanuatu",
"VAT" => "Vatican_City",
"VEN" => "Venezuela",
"VIE" => "Vietnam",
"WAL" => "Wallis_Futuna_Islands",
"WES" => "Western_Samoa",
"YEM" => "Yemen",
"ZAI" => "Zaire",
"ZAM" => "Zambia",
"ZIM" => "Zimbabwe" ];


$IslandCodes               =                   [ "ABAC" => "Abaco",
"ACKL" => "Acklins",
"ANDR" => "Andros",
"BERR" => "Berry Islands",
"BIMI" => "Bimini",
"CAT" => "Cat Island",
"CROO" => "Crooked Island",
"ELEU" => "Eleuthera",
"EXUM" => "Exuma",
"GRAN" => "Grand Bahama",
"INAG" => "Inagua",
"LONG" => "Long Island",
"MAYA" => "Mayaguana",
"NEW" => "New Providence",
"RAGG" => "Ragged Island",
"RUM" => "Rum Cay",
"SAN" => "San Salvador",
"NA" => "Not Applicable" ];


?>


<div class="container-fluid mt-4">

  <div class="animated fadeIn">

    <div class="row">

        <div class="col">

            <div class="card">

                <div class="card-body"> 

                    <h3>ORDER <strong>DETAILS FOR <?php echo $this->GetOrder['data'][0]['OrderID']; ?></strong></h3>

                    <?php if ( !isset( $this->setMessage ) ) : ?>

                        <div class="alert alert-primary border-primary">
                            <b class="font-weight-normal">View all order that have not been assigned for processing.</b>
                        </div>                    

                    <?php else: ?>

                        <?php echo $this->setMessage; ?>

                    <?php endif; ?>

                    <button class="font-sm btn-dark btn-lg" type="button" onclick="location.href='<?php echo gpConfig['URLPATH']; ?>agent'"><i class="fa fa-desktop"></i>&nbsp;Dashboard</button>
                    <button class="font-sm btn-primary btn-lg" type="button" onclick="location.href='<?php echo gpConfig['URLPATH']; ?>agent/pending'"><i class="fa fa-desktop"></i>&nbsp;All Pending Orders</button>

                    <?php if ( $this->GetOrder['data'][0]['OrderStatus'] == 2 ) :  ?>
                        <button class="font-sm btn-warning btn-lg" type="button" data-target="#UpdateStatus" data-toggle="modal"><i class="fa fa-pencil"></i>&nbsp;Update Status</button>
                    <?php endif; ?>

                    <?php if ( $this->GetOrder['data'][0]['OrderStatus'] == 3 ) :  ?>
                        <button class="font-sm btn-pink btn-lg" type="button" data-target="#AssignToDelivery" data-toggle="modal"><i class="fa fa-truck"></i>&nbsp;Assign To Delivery Concierge</button>
                    <?php endif; ?>
                    
                </div>

            </div>

        </div>

    </div>

     <div class="row">

        <div class="col">

            <div class="card">

                <div class="card-body"> 

                    <div class="row">
                        <img class="img-fluid w-75" src="<?php echo gpConfig['URLPATH']; ?>data/uploads/Devices/<?php echo $this->GetOrder['data'][0]['OrderDevice']; ?>/<?php echo $this->GetOrder['data'][0]['ImageName']; ?>" />            
                    </div>

                    <div class="">

                        <div class="deviceCost row pricing">
                            <div class="costLabel text-right col-6 font-weight-bold">** Device Cost</div>
                            <div class="deviceCostValue text-left"><?php echo $this->GetOrder['data'][0]['DeviceCost']; ?></div>
                        </div>

                        <div class="planCost row pricing">
                            <div class="costLabel text-right col-6 font-weight-bold">Plan Cost</div>
                            <div class="planCostValue text-left"><?php echo $this->GetOrder['data'][0]['PlanCost']; ?></div>
                        </div>

                       <?php if ( !empty( $this->GetOrder['data'][0]['OrderAccessories'] ) ) : ?>

                            <div class="planCost row pricing">
                                <div class="costLabel text-right col-6 font-weight-bold">Accessory</div>
                                <div class="planCostValue text-left"><?php echo $this->GetOrder['data'][0]['AccessoryCost']; ?></div>
                            </div>

                        <?php endif; ?>

                        <div class="vatCost row pricing">
                            <div class="costLabel text-right col-6 font-weight-bold">VAT</div>
                            <div class="totalVATValue text-left"><?php echo number_format( $this->GetOrder['data'][0]['OrderVAT'], 2 ); ?></div>
                        </div>

                        <div class="totalCost row pricing">
                            <div class="costLabel text-right col-6 font-weight-bold">Total</div>
                            <div class="totalVATValue text-left"><?php echo number_format( $this->GetOrder['data'][0]['OrderTotal'], 2 ); ?></div>
                        </div>
                    
                    </div>

                </div>

            </div>

        </div>

        <div class="col-8">

            <div class="card">

                <div class="card-body">

                    <h5>order <strong>details</strong></h5>
                    <div class="row">
                        <div class="col-md-2 text-right">order id:</div>
                        <div class="col-md text-left"><?php echo $this->GetOrder['data'][0]['OrderID']; ?></div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">customer:</div>
                        <div class="col-md text-left"><?php echo strtolower( $this->GetOrder['data'][0]['OrderCustLast'] .', '. $this->GetOrder['data'][0]['OrderCustFirst'] ); ?></div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">plan:</div>
                        <div class="col-md text-left"><?php echo  $this->GetOrder['data'][0]['PlanName']; ?></div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">payment:</div>
                        <div class="col-md text-left">
                            <?php echo $this->GetOrder['data'][0]['OrderCardType']; ?> ( x-<?php echo trim( $this->GetOrder['data'][0]['OrderCardFour'] ); ?> )  | auth code: <?php echo $this->GetOrder['data'][0]['OrderCardAuth']; ?>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-md-2 text-right">status:</div>
                        <div class="col-md text-left">
                            <?php echo strtolower( $this->LogicAgent->OrderStatus( $this->GetOrder['data'][0]['OrderStatus'] ) ); ?> 
                            
                            <?php if ( $this->GetOrder['data'][0]['OrderStatus'] == 4 ) : ?>
                                &nbsp;|&nbsp;<strong>assigned to:</strong> 
                                
                                <?php echo strtolower( $this->GetOrder['data'][0]['AdminLast'] .', '. $this->GetOrder['data'][0]['AdminFirst'] ); ?>

                            <?php endif; ?>

                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">date:</div>
                        <div class="col-md text-left">
                            <?php echo date( 'd-M-Y \a\t h:i a', strtotime( $this->GetOrder['data'][0]['OrderCreated'] ) ); ?> <br />            
                        </div>
                    </div>

                
                    <h5 class="mt-5">customer <strong>details</strong></h5>
                    <div class="row">
                        <div class="col-md-2 text-right">name:</div>
                        <div class="col-md text-left"><?php echo strtolower( $this->GetOrder['data'][0]['OrderCustLast'] .', '. $this->GetOrder['data'][0]['OrderCustFirst'] ); ?></div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">phone:</div>
                        <div class="col-md text-left"><?php echo  $this->GetOrder['data'][0]['OrderCustMobile']; ?></div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">Email:</div>
                        <div class="col-md text-left"><?php echo  $this->GetOrder['data'][0]['OrderCustEmail']; ?></div>
                    </div>
                    
                    <div class="row mt-2">
                        <div class="col-md-2 text-right">Address:</div>
                        <div class="col-md text-left">
                            <?php echo  strtolower( trim( $this->GetOrder['data'][0]['OrderCustAddr'] ) ); ?> <br />            
                        </div>
                    </div>

                    <?php if ( !empty( $this->GetOrder['data'][0]['OrderCustAddrTwo']  ) ) : ?>

                        <div class="row mt-2">
                            <div class="col-md-2">&nbsp;</div>
                            <div class="col-md text-left">
                                <?php echo  strtolower( trim( $this->GetOrder['data'][0]['OrderCustAddrTwo'] ) ); ?> <br />            
                            </div>
                        </div>

                    <?php endif; ?>

                    <div class="row mt-2">

                        <div class="col-md-2"></div>
                        <div class="col-md text-left">
                            <?php echo strtolower( $this->GetOrder['data'][0]['OrderCustCity'] ) .', '. strtolower( $IslandCodes[ $this->GetOrder['data'][0]['OrderCustIsland'] ] ); ?> <br />            
                            <?php echo strtolower( $CountryCodes[ $this->GetOrder['data'][0]['OrderCustCountry'] ] ); ?>
                        </div>

                    </div>
                    
                 
                    <?php if ( !empty( $this->GetOrder['data'][0]['OrderAccessories'] ) ) : ?>

                        <h5 class="mt-5">accessory <strong>details</strong></h5>

                        <div class="row">

                            <div class="col-md-2 text-center">

                                <img class="img-fluid w-75" src="<?php echo gpConfig['URLPATH']; ?>data/uploads/Accessories/<?php echo $this->GetOrder['data'][0]['OrderAccessories']; ?>/<?php echo $this->GetOrder['data'][0]['AccessoryCover']; ?>" />

                            </div>
                            <div class="col-md text-left">
                            
                                <div class="col-md">
                                    <?php echo  strtolower( $this->GetOrder['data'][0]['AccessoryName'] ); ?>
                                </div>

                                <div class="col-md mt-2">
                                    <?php echo  strtolower( $this->GetOrder['data'][0]['AccessoryDescription'] ); ?>
                                </div>

                                <div class="col-md mt-2">
                                    <?php echo $this->GetOrder['data'][0]['AccessoryCost']; ?>
                                </div>

                            </div>

                        </div>


                    <?php endif; ?>

                </div>

            </div>
        </div>

    </div>

  </div>

</div>



  <div class="modal fade animated animate__animated animate__slideInLeft" id="UpdateStatus" tabindex="-2" role="dialog" aria-labelledby="myCreateFolder" style="display: none;" aria-hidden="true">
      <div class="modal-dialog" role="document">
          <div class="modal-content">

              <form method="POST" action="<?php echo gpConfig['URLPATH'] . _ACCESS_; ?>order/<?php echo $this->OrderGUID; ?>">

                  <div class="modal-header bg-warning">
                      <h5 class="modal-title text-white">UPDATE <strong>ORDER STATUS</strong></h5>
                      <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">×</span>
                      </button>
                  </div>
                  
                  <div class="modal-body">

                      <div class="form-body text-dark"> 
                      
                          <div class="alert alert-warning border-warning">
                              click the update order button to continue
                          </div>

                          <div class="row"> 

                              <div class="col-md-12 mt-3"> 
                                <strong>sms message</strong>
                              </div>

                              <div class="col-md-12"> 
                                  <div class="div mt-2 text-dark font-weight-normal">
                                      <textarea name="sms" rows="4" placeholder="sms" class="form-control">this message is to inform you that the status of your aliv order #<?php echo $this->GetOrder['data'][0]['OrderID']; ?> has been updated to "out for delivery". thank you for choosing aliv.</textarea>
                                  </div>

                              </div>

                              <div class="col-md-12 mt-3"> 
                                <strong>email message</strong>
                              </div>

                              <div class="col-md-12"> 
                                  <div class="div mt-2 text-dark font-weight-normal">
                                      <textarea name="email" rows="4" placeholder="email" class="form-control">this message is to inform you that the status of your aliv order #<?php echo $this->GetOrder['data'][0]['OrderID']; ?> has been updated to "out for delivery". thank you for choosing aliv.</textarea>
                                  </div>
                              </div>

                          </div>
                          
                      </div>

                  </div>

                  <div class="modal-footer">           
                      <input type="hidden" value="<?php echo $this->GetOrder['data'][0]['OrderID']; ?>" name="OrderID" />                                                                        
                      <button class="font-sm btn-lg btn-dark font-weight-light" type="button" data-dismiss="modal"><i class="fa fa-close"></i> cancel</button>                                                  
                      <button class="font-sm btn-lg btn-warning font-weight-light" type="submit" name="btnUpdate"><i class="fa fa-save"></i>  update order</button>                                                                        
                  </div>

              </form>
              
          </div>

      </div>

  </div>


  <div class="modal fade animated animate__animated animate__slideInLeft" id="AssignToDelivery" tabindex="-2" role="dialog" aria-labelledby="myCreateFolder" style="display: none;" aria-hidden="true">
      <div class="modal-dialog" role="document">
          <div class="modal-content">

              <form method="POST" action="<?php echo gpConfig['URLPATH'] . _ACCESS_; ?>order/<?php echo $this->OrderGUID; ?>">

                  <div class="modal-header bg-pink">
                      <h5 class="modal-title text-white"><?php echo strtolower( 'ASSIGN <strong>TO DELIVERY CONCIERGE</strong>' ); ?></h5>
                      <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">×</span>
                      </button>
                  </div>
                  
                  <div class="modal-body">

                      <div class="form-body text-dark"> 
                      
                          <div class="alert alert-pink border-pink">
                              click the update order button to continue
                          </div>

                          <div class="row"> 

                              <div class="col-md-12 mt-3"> 
                                <strong>delivery concierge</strong>
                              </div>

                              <div class="col-md-12"> 
                                  <div class="div mt-2 text-dark font-weight-normal">                                      
                                      <select name="DeliveryAssignment" class="form-control custom-select">

                                            <?php foreach( $this->GetConcierge['data'] as $AdminSet ) : ?>

                                                <option value="<?php echo $AdminSet['AdminID']; ?>"><?php echo strtolower( $AdminSet['AdminLast'] .', '. $AdminSet['AdminFirst'] ); ?></option>

                                            <?php endforeach; ?>
                                            
                                      </select>
                                  </div>
                              </div>

                          </div>
                          
                      </div>

                  </div>

                  <div class="modal-footer">           
                                                                            
                      <input type="hidden" value="<?php echo $this->GetOrder['data'][0]['OrderID']; ?>" name="OrderID" />  
                      <button class="font-sm btn-lg btn-dark font-weight-light" type="button" data-dismiss="modal"><i class="fa fa-close"></i> cancel</button>                                                  
                      <button class="font-sm btn-lg btn-pink font-weight-light" type="submit" name="btnAssign"><i class="fa fa-save"></i> assign to delivery concierge</button>                                                                        
                  </div>

              </form>
              
          </div>

      </div>

  </div>